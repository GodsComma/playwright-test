import { BrowserContext, Page, test as base } from '@playwright/test';

type CustomFixtures = {
  kdpContext: BrowserContext,
};

export const test = base.extend<CustomFixtures>({
  jasonContext: async ({ context }, use) => {
    await context.setExtraHTTPHeaders({
      JWT: '.ewogICAgImFkbWluX29yZ2FuaXphdGlvbiI6ICJET0QiLAogICAgImFmZmlsaWF0aW9ucyI6ICJOT04tQUdFTkNZIE1JTElUQVJZIiwKICAgICJhdG9fc3RhdHVzIjogZmFsc2UsCiAgICAiYnJpZWZpbmdzIjogWyJCUklFRklORzQiXSwKICAgICJjbGVhcmFuY2UiOiBbIlRTIiwgIlMiLCAiQyIsICJVIl0sCiAgICAiY29pcyI6IFsiRE9EX1VTRVIuTlNBLkVFSUMiLCAiSU5URVJQT0wuRkJJLkVFSUMiXSwKICAgICJDTiI6ICJKYXNvbiBUYW4iLAogICAgImRpc3NlbV9jb250cm9scyI6IFsiTEVTIiwgIlJTIl0sCiAgICAiRE4iOiAiQz1cIlVTXCIsU1Q9XCJWaXJnaW5pYVwiLEw9XCJBc2hidXJuXCIsTz1cIk9ic2N1cml0eSBMYWJzXCIsT1U9XCJHaG9zdCBSaWRlclwiLENOPVwiSmFzb24gVGFuXCIsRT1cImoudGFuQG9ic2N1cml0eWxhYnMuY29tXCIiLAogICAgImVudGl0eV9zZWN1cml0eV9tYXJrIjogIlRPUCBTRUNSRVQvL1NJLy9USy8vTk9GT1JOIiwKICAgICJlbWFpbCI6ICJqLnRhbkBvYnNjdXJpdHlsYWJzLmNvbSIsCiAgICAiZmluZV9hY2Nlc3NfY29udHJvbHMiOiBbIlNJIiwgIlRLIl0sCiAgICAiaXNfaWNfbWVtYmVyIjogdHJ1ZSwKICAgICJpY19uZXR3b3JrcyI6IFsiSldJQ1MiXSwKICAgICJsYWNzIjogWyJFTzEyMzMzX0dFT0lOVCIsICJESVNTRU1fRklfU0lHSU5UIl0sCiAgICAibGlmZV9jeWNsZV9zdGF0dXMiOiAiUFJPRCIsCiAgICAicmVnaW9ucyI6IFsiRVVjZSIsICJBRmVhIl0sCiAgICAidG9waWNzIjogWyJIUkVMIiwgIkRJIl0sCiAgICAidHJpYmFsX2ZpcmVfdHJhaW5pbmciOiBbIkxFVkVMMV9UUkFJTklORyJdLAogICAgInZpc2FzIjogWyJVU0EiLCAiRlZFWSJdLAogICAgImNvbXBhcnRtZW50cyI6IFsiU0kiLCAiVEsiXSwKICAgICJncm91cHMiOiBbImdyb3VwMSIsICJncm91cDIiLCAiZ3JvdXAzIl0KfQo=.',
      maxclassification: 'NOFORN',
    });
    await use(context);
  },
  kdpContext: async ({ context }, use) => {
    await context.setExtraHTTPHeaders({
      JWT: '.eyJhZG1pbl9vcmdhbml6YXRpb24iOiJET0QiLCJhZmZpbGlhdGlvbnMiOiJOT04tQUdFTkNZIE1JTElUQVJZIiwiYXRvX3N0YXR1cyI6ZmFsc2UsImJyaWVmaW5ncyI6WyJCUklFRklORzQiXSwiY2xlYXJhbmNlIjpbIlRTIiwiUyIsIkMiLCJVIl0sImNvaXMiOlsiRE9EX1VTRVIuTlNBLkVFSUMiLCJJTlRFUlBPTC5GQkkuRUVJQyJdLCJDTiI6IktEUCBVc2VyIiwiZGlzc2VtX2NvbnRyb2xzIjpbIkxFUyIsIlJTIl0sIkROIjoiQz1cIlVTXCIsU1Q9XCJWaXJnaW5pYVwiLEw9XCJBc2hidXJuXCIsTz1cIk9ic2N1cml0eSBMYWJzXCIsT1U9XCJHaG9zdCBSaWRlclwiLENOPVwiS0RQIFVzZXJcIixFPVwiai50YW5Ab2JzY3VyaXR5bGFicy5jb21cIiIsImVudGl0eV9zZWN1cml0eV9tYXJrIjoiVE9QIFNFQ1JFVC8vU0kvL1RLLy9OT0ZPUk4iLCJlbWFpbCI6Im5vcmVwbHlAb2JzY3VyaXR5bGFicy5jb20iLCJmaW5lX2FjY2Vzc19jb250cm9scyI6WyJTSSIsIlRLIl0sImlzX2ljX21lbWJlciI6dHJ1ZSwiaWNfbmV0d29ya3MiOlsiSldJQ1MiXSwibGFjcyI6WyJFTzEyMzMzX0dFT0lOVCIsIkRJU1NFTV9GSV9TSUdJTlQiXSwibGlmZV9jeWNsZV9zdGF0dXMiOiJQUk9EIiwicmVnaW9ucyI6WyJFVWNlIiwiQUZlYSJdLCJ0b3BpY3MiOlsiSFJFTCIsIkRJIl0sInRyaWJhbF9maXJlX3RyYWluaW5nIjpbIkxFVkVMMV9UUkFJTklORyJdLCJ2aXNhcyI6WyJVU0EiLCJGVkVZIl0sImNvbXBhcnRtZW50cyI6WyJTSSIsIlRLIl0sImdyb3VwcyI6WyJncm91cDEiLCJncm91cDIiLCJncm91cDMiXX0.',
      maxclassification: 'NOFORN',
    });
    await use(context);
  },
});

export { expect } from '@playwright/test';
